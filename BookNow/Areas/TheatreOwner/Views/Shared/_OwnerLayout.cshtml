<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - BookNow Owner Dashboard</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <!-- Using Bootstrap for structural CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.9/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css">

    <!-- NOTE: Custom CSS classes for the theme should be loaded here -->
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    
    <style>
        /* Base Theme Definition */
        :root { --brand-primary: #E53935; --brand-primary-dark: #B71C1C; --text-color: #212121; --bg-light: #f9f9f9; }
        body.light-theme { background-color: var(--bg-light); color: var(--text-color); font-family: 'Inter', sans-serif; }
        .light-theme .card { background-color: #fff; border: none; border-radius: 0.75rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); padding: 2rem; }
        .light-theme .form-control { background-color: #fff; border: 1px solid #dcdcdc; border-radius: 0.5rem; color: var(--text-color); padding: 0.75rem; caret-color: var(--brand-primary); transition: border-color 0.2s ease; }
        .light-theme .form-control:focus { border-color: var(--brand-primary) !important; outline: none; box-shadow: none; }
        .btn-primary { background-color: var(--brand-primary) !important; color: #fff !important; border: none; border-radius: 0.5rem; font-weight: 600; padding: 0.75rem 1.5rem; transition: background-color 0.25s ease, box-shadow 0.25s ease; }
        .btn-primary:hover { background-color: var(--brand-primary-dark) !important; box-shadow: 0 4px 12px rgba(183,28,28,0.4); }

        .nav-link {
            color: var(--text-color) !important;
            border-radius: 0.5rem;
            width: 100%;
            text-align: left;
        }
        .nav-link:hover { background-color: rgba(229, 57, 53, 0.1); color: var(--brand-primary) !important; }
        .nav-link.active { background-color: var(--brand-primary); color: #fff !important; font-weight: 600; }
        .nav-sidebar { min-height: 100vh; background-color: #fff; box-shadow: 2px 0 5px rgba(0,0,0,0.05); }

    
       
        @@media (min-width: 992px) { /* Bootstrap's 'lg' breakpoint */
            .lg-push-sidebar

        {
            margin-left: 250px !important;
        }

        }
            </style>
</head>
<body class="light-theme">

    <!-- Toast container for TempData messages -->
    <div class="position-fixed top-0 end-0 p-3" style="z-index:1055">
        @if (TempData["success"] != null)
        {
            <div class="toast bg-success text-white border-0 shadow mb-2 show" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body">@TempData["success"]</div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            </div>
        }
        @if (TempData["error"] != null)
        {
            <div class="toast bg-danger text-white border-0 shadow mb-2 show" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body">@TempData["error"]</div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            </div>
        }
    </div>

    <button class="btn btn-light d-lg-none position-fixed top-0 start-0 m-2" type="button"
            data-bs-toggle="offcanvas" data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas">
        <i class="fas fa-bars"></i>
    </button>

    <div class="d-flex" style="height: 100vh; overflow: hidden;">
        <!-- Sidebar for large screens -->
        <nav id="sidebar" class="nav-sidebar d-none d-lg-flex flex-column justify-content-between p-3"
             style="width: 250px; position: fixed; top: 0; bottom: 0; background-color: #fff; box-shadow: 2px 0 5px rgba(0,0,0,0.05);">

            <div>
                <h5 class="text-center mb-4" style="color:var(--brand-primary-dark); font-weight: 800;">BookNow Owner</h5>
                <ul class="nav flex-column mb-3">
                    <li class="nav-item mb-2" is-active-link asp-area="TheatreOwner" asp-controller="Theatre" asp-action="Index" active-class="active">
                        <a class="nav-link ms-2" asp-area="TheatreOwner" asp-controller="Theatre" asp-action="Index">
                            <i class="fas fa-chart-line me-2"></i> Dashboard
                           
                        </a>
                    </li>
                    <li class="nav-item mb-2" is-active-link asp-area="TheatreOwner" asp-controller="Theatre" asp-action="Upsert" active-class="active">
                        <a class="nav-link ms-2" asp-area="TheatreOwner" asp-controller="Theatre" asp-action="Upsert">
                            <i class="fas fa-plus me-2"></i> Add Theatre
                        </a>
                    </li>
                </ul>
            </div>

            <div class="border-top pt-3">
                <form asp-area="Identity" asp-page="/Account/Logout"
                      asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })" method="post">
                    <button type="submit" class="btn btn-outline-secondary w-100" >
                        <i class="fas fa-sign-out-alt me-2"></i> Logout
                    </button>
                </form>
            </div>
        </nav>

       
        <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarOffcanvas" aria-labelledby="sidebarOffcanvasLabel">
            <div class="offcanvas-header">
                <h5 id="sidebarOffcanvasLabel" class="mb-0" style="color:var(--brand-primary-dark); font-weight:800;">BookNow Owner</h5>
                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body d-flex flex-column justify-content-between p-3">
                <div>
                    <ul class="nav flex-column mb-3">
                        <li class="nav-item mb-2" is-active-link asp-area="TheatreOwner" asp-controller="Theatre" asp-action="Index" active-class="active">
                            <a class="nav-link" asp-area="TheatreOwner" asp-controller="Theatre" asp-action="Index">
                                <i class="fas fa-chart-line me-2"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item mb-2" is-active-link asp-area="TheatreOwner" asp-controller="Theatre" asp-action="Upsert" active-class="active">
                            <a class="nav-link" asp-area="TheatreOwner" asp-controller="Theatre" asp-action="Upsert">
                                <i class="fas fa-plus me-2"></i> Add Theatre
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="border-top pt-3">
                    <form asp-area="Identity" asp-page="/Account/Logout"
                          asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })" method="post">
                        <button type="submit" class="btn btn-outline-secondary w-100">
                            <i class="fas fa-sign-out-alt me-2"></i> Logout
                        </button>
                    </form>
                </div>
            </div>
        </div>

       
        <main role="main" class="flex-grow-1 p-4 lg-push-sidebar" style="height: 100vh; overflow-y: auto;">
            @RenderBody()
        </main>
    </div>


    <!-- Core JS -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    
    <script>
        // Toast initialization
        $(function(){
            $('.toast').each(function(){
                var toast = new bootstrap.Toast(this, { delay: 3000 });
                toast.show();
            });

            // Auto-hide mobile offcanvas on link click
            $('.offcanvas .sidebar a').on('click', function() {
                var offcanvasElement = document.getElementById('sidebarOffcanvas');
                var offcanvas = bootstrap.Offcanvas.getInstance(offcanvasElement);
                if (offcanvas) {
                    offcanvas.hide();
                }
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.9/dist/sweetalert2.all.min.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
