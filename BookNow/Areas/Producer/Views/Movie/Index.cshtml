@model IEnumerable<BookNow.Application.DTOs.MovieDTOs.MovieReadDTO>
@using BookNow.Utility

@{
    ViewData["Title"] = "Manage Movies";
}


<style>
    /* 1. Global Primary Button Style (Using a professional blue from the theme) */
    a.btn-primary,
    button.btn-primary {
        background-color: var(--brand-primary) !important;
        border-color: var(--brand-primary) !important;
        color: #fff !important;
        border-radius: 0.5rem; /* Slightly rounded corners */
        padding: 0.5rem 1rem;
        transition: all 0.2s ease;
        font-weight: 600; /* Bolder text for importance */
    }

        a.btn-primary:hover,
        button.btn-primary:hover {
            background-color: var(--brand-primary-dark) !important;
            border-color: var(--brand-primary-dark) !important;
            color: #fff !important;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow on hover */
        }

    /* 2. Action Buttons in Table (Edit/Delete) */
    .table .btn-primary { /* Edit button */
        background-color: #28a745 !important; /* Green for Edit */
        border-color: #28a745 !important;
    }

    .table .btn-danger { /* Delete button */
        background-color: #dc3545 !important; /* Red for Delete */
        border-color: #dc3545 !important;
    }

    .table .btn-primary:hover {
        background-color: #218838 !important;
        border-color: #218838 !important;
    }

    .table .btn-danger:hover {
        background-color: #c82333 !important;
        border-color: #c82333 !important;
    }

    /* 3. DataTables Search and Length Alignment Fix */
    /* DataTables wraps the search and 'Show X entries' in the 'dataTables_filter' and 'dataTables_length' divs */
    .dataTables_wrapper .row:first-child {
        margin-bottom: 1rem; /* Space below the controls */
        padding: 0 15px; /* Ensure content is padded within the card */
    }

        /* Flex container for the top controls (Show X entries + Search) */
        .dataTables_wrapper .row:first-child > div {
            display: flex;
            align-items: center; /* Vertically align dropdown/search field */
        }

    /* Align 'Show X entries' to the left */
    .dataTables_length {
        margin-right: auto; /* Push the search bar away */
    }

    /* Align Search to the right */
    .dataTables_filter {
        margin-left: auto;
    }

        .dataTables_filter label, .dataTables_length label {
            display: flex;
            align-items: center;
            gap: 0.5rem; /* Space between label and input */
        }

        .dataTables_filter input, .dataTables_length select {
            border-radius: 0.3rem; /* Small radius on inputs */
            border: 1px solid  var(--border-color);
            padding: 0.375rem 0.75rem;
        }

    /* Enhance Table Appearance */
    #tblData {
        border-radius: 0.5rem;
        overflow: hidden; /* Important for rounding corners of the table */
    }

        #tblData thead th {
            background-color: var(--bg-light); /* Light header background */
            font-weight: 700;
            color: var(--text-color);
            border-bottom: 2px solid var(--border-color);
            vertical-align: middle;
        }

        #tblData tbody td {
            vertical-align: middle;
        }

</style>

<div class="container py-4">
    
    <div class="d-flex justify-content-between align-items-center mb-4 p-3 bg-white rounded shadow-sm">
        <h2 class="mb-0 text-primary" style="font-weight: 400;">
            <i class="fas fa-video me-2"></i> Movie Inventory Management
        </h2>

        @* Modified 'Create New Movie' Button *@
        <a asp-area="Producer" asp-controller="Movie" asp-action="Upsert" class="btn btn-primary d-inline-flex align-items-center">
            <i class="fas fa-plus-circle me-1"></i> Create New Movie
        </a>
    </div>

    @* Movie List Table - Will be populated by DataTables (movie.js) *@
    <div class="card shadow-lg p-3 light-theme border-0">
        <div class="card-body p-0">
            
            <table id="tblData" class="table table-hover table-striped w-100">
                <thead>
                    <tr class="text-center">
                        <th style="width: 8%;">Poster</th>
                        <th style="width: 20%;">Title</th>
                        <th style="width: 12%;">Genre</th>
                        <th style="width: 10%;">Language</th>
                        <th style="width: 10%;">Duration (min)</th>
                        <th style="width: 15%;">Release Date</th>
                        <th style="width: 25%;">Actions</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

@section Scripts {
    
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    
    <script src="~/js/producer/movie.js"></script>
}
